% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/Plot.R
\name{plot_game_xG}
\alias{plot_game_xG}
\title{Plot all shot attempts in a game on a full rink}
\usage{
plot_game_xG(game = 2023030417, model = 1L, team = "home")
}
\arguments{
\item{game}{Integer or character game ID understood by \code{\link[=gc_play_by_play]{gc_play_by_play()}}
and \code{\link[=gc_summary]{gc_summary()}}. Default is \code{2023030417}.}

\item{model}{Integer indicating which expected goals model to use:
\code{1L} for \code{xG_v1}, \code{2L} for \code{xG_v2}, \code{3L} for \code{xG_v3}. Default is \code{1L}.}

\item{team}{Character string indicating which team’s shots to plot,
either \code{'home'} or \code{'away'} (case-insensitive). Default is \code{'home'}.}
}
\value{
Invisibly returns \code{NULL}. Called for its side effect of creating a
PNG file in the working directory containing the rink and shot map.
}
\description{
\code{plot_game_xG()} plots all shot attempts (goal, shot-on-goal, missed-shot,
blocked-shot) for a single game on a full NHL rink, colours them according
to an expected goals (xG) model, and saves the result as a PNG file.
}
\details{
For the selected team (home or away), the function:
\itemize{
\item loads play-by-play data via \code{\link[=gc_play_by_play]{gc_play_by_play()}},
\item flags which team is at home using \code{\link[=flag_is_home]{flag_is_home()}},
\item normalises coordinates with \code{\link[=normalize_coordinates]{normalize_coordinates()}} so all shots
attack toward +x,
\item computes the chosen xG model via one of
\code{\link[=calculate_expected_goals_v1]{calculate_expected_goals_v1()}}, \code{\link[=calculate_expected_goals_v2]{calculate_expected_goals_v2()}},
or \code{\link[=calculate_expected_goals_v3]{calculate_expected_goals_v3()}},
\item filters to events with \code{typeDescKey} equal to \code{'goal'},
\code{'shot-on-goal'}, \code{'missed-shot'}, or \code{'blocked-shot'},
\item jitters shot coordinates slightly to reduce overplotting, and
\item draws a full rink via \code{\link[=plot_full_rink]{plot_full_rink()}} and overlays the shots.
}

Shot marker shapes are:
\itemize{
\item goal         – star (\code{pch = 8}),
\item shot-on-goal – filled circle (\code{pch = 16}),
\item missed-shot  – filled triangle (\code{pch = 17}),
\item blocked-shot – filled square (\code{pch = 15}).
}

Expected-goals values are binned into up to five game-specific ranges and
mapped to a blue-to-red palette, with low-xG attempts drawn in blue and
high-xG attempts in red. A title is constructed from \code{\link[=gc_summary]{gc_summary()}} using
the game date and team abbreviations, e.g.
\code{"2024-06-24 FLA Shots vs. EDM by Result and xG, jittered"}.

The plot is written to a PNG file of fixed size (approximately 1080 x 566
pixels at 144 dpi) in the working directory. The filename has the form
\verb{shots_\{game\}_\{team\}_xG_v\{model\}.png}, for example
\code{"shots_2023030417_home_xG_v1.png"}.
}
\examples{
\donttest{
  # Home team, xG_v1
  plot_game_xG(2023030417, model = 1, team = 'home')

  # Away team, xG_v2
  plot_game_xG(2023030417, model = 2, team = 'away')
}

}
